## Структура проекта
```
.
├── dataset
│   ├── metadata.csv
│   ├── processed
│   │   └── correct
│   ├── raw
│   │   ├── correct
│   │   │   ├── 20241122_122513.mp4
│   │   │   ├── 20241122_122525.mp4
│   │   │   └── ...
│   │   └── incorrect
│   │       ├── error_body_tilt
│   │       │   ├── 20241122_124943.mp4
│   │       │   ├── 20241122_124958.mp4
│   │       |   └── ...
│   │       └── error_raised_feet
│   │           ├── 20241122_123745.mp4
│   │           ├── 20241122_124052.mp4
│   │           └── ...
│   └── README.md
├── directory_structure.txt
├── dit_structure.txt
├── outputs
│   └── models
│       └── predictions
│           └── logs
├── README.md
├── scripts
│   ├── _prepare_video.py
│   ├── video_mirroring.py
│   ├── video_split.py
│   └── ...
├── src
│   ├── inference
│   ├── __init__.py
│   ├── models
│   ├── training
│   └── utils
└── venv
```

Структуру проекта нужно периодически обновлять, чтобы у нас была хорошая документация и чтобы мы не могли запутаться в ней. Такую структуру можно легко получить, через инструмент `tree` (`sudo apt install tree`). Команда `tree` выведет в терминал всю директорию, чтобы записать ее в `.txt` файл можно использовать такую команду: `tree > directory_structure.txt`.

## 1. Описание ключевых папок и файлов

- **`dataset/`**: Папка с данными, разделенная на `raw` (необработанные данные) и `processed` (обработанные данные). Внутри `raw` могут быть подкаталоги для правильных и неправильных данных. Каждый подкаталог может содержать видеофайлы, например, с тренировками или ошибками выполнения упражнений.
- **`outputs/`**: Папка для вывода, после работы модели. Включает папки для моделей, предсказаний и логов.
- **`scripts/`**: Папка для скриптов, которые выполняют задачи подготовки данных. Все скрипты импортируются в файл `_prepare_video.py` и дальше используются.
- **`src/`**: Исходный код, разбитый на несколько папок для разных частей проекта, таких как обучение модели, выполнение инференса, а также вспомогательные функции.
- **`venv/`**: Папка для виртуальной среды, которая используется для изоляции зависимостей Python-проектов.
- **`README.md`** и **`dataset/README.md`**: Документация для общего описания проекта и подробного объяснения структуры данных.

---
## 2. Подготовка к работе:
#### 1. Установите **`Python`** и **`pip`**

Убедитесь, что у вас установлен Python и пакетный менеджер pip. Вы можете проверить это, выполнив следующие команды в терминале:
```bash
python --version
pip --version
```
**`Если Python не установлен`**, вы можете скачать его с официального сайта Python (https://www.python.org/downloads/). Установка Python обычно включает pip (после установки проверьте есть ли pip, если нет установите его командой:
```bash
python -m ensurepip --upgrade)
```

#### 2. Создайте **`виртуальное окружение`** 
Создание виртуального окружения позволяет изолировать зависимости вашего проекта от других проектов и системных библиотек (подробности использования смотреть в 4 разделе `Виртуальная среда Python`). Для этого выполните следующие команды:
```bash
cd путь/к/вашему/проекту
python -m venv venv
```
#### 3. **`Активируйте виртуальное окружение**`
После создания виртуального окружения его нужно активировать:

На **`Windows`**:
```bash
venv\Scripts\activate
```
На **`macOS и Linux`**:
```bash
source venv/bin/activate
```
#### 4. **`Установите зависимости из requirements.txt`**
Теперь вы можете установить все зависимости с помощью следующей команды:
```bash
pip install -r requirements.txt
```
#### 5. **`Проверьте установленные зависимости`**
```bash
pip list
```

## 3. Используемые библиотеки и их назначение

### 1) `os` —
### 2) `moviepy` —

### 3) cv2

`cv2` — это модуль Python из библиотеки **`OpenCV` (Open Source Computer Vision)**. `OpenCV` — одна из самых популярных библиотек для обработки изображений и компьютерного зрения. Она поддерживает работу с изображениями и видео, включая такие задачи, как распознавание объектов, обработка видео, фильтрация изображений, работа с камерами и многое другое.

Этот  модуль понадобился нам, так как `MediaPipe` не имеет встроенных функций визуализации, таких как отображение изображения или видео. `OpenCV` используется для захвата данных с камеры, обработки изображений (например, изменения формата цвета) и отображения результатов.

### 4) mediapipe

`**MediaPipe**` — это мощная библиотека от Google, которая предоставляет готовые решения для анализа и обработки видео, изображения и данных в реальном времени, таких как отслеживание поз, жестов, лиц, рук и объектов.

---

## 4. Подробности

### venv (виртуальная среда Python)

`venv` (виртуальная среда Python) позволяет изолировать зависимости проекта от глобальной среды Python. Это полезно, чтобы избегать конфликтов между различными версиями библиотек в разных проектах.

Для создания виртуальной среды нужно выполнить команду в терминале (`myenv` — имя виртуальной среды):

```bash
python -m venv myenv
```

Чтобы удалить виртуальную среду, нужно просто стереть папку `myenv`.

Активация виртуальной среды (нужно, чтобы, например, установить какую-нибудь библиотеку):

```bash
source myenv/bin/activate # На Linux
```

Если понадобится деактивировать виртуальную среду, то нужно прописать такую команду: `deactivate`.

> [!Note]
> Если использовался плагин `code runner`, то он поумолчания пытается открыть файл с помощью интерпретатора в директории `path`, тоесть с помощью глобальной среды выполнения. Но сегодня везде стараются изалировать проекты делая списки плагинов, их версий и зависимостей, чтобы небыло конфликтов в разных проектах.
>
> Чтобы указать Code Runner использовать конкретную среду:
>
> 1. Откройте настройки VS Code
> 2. В строке поиска введите **Code Runner Executor Map**.
> 3. Выбрать из `User` и `Workspace` второе, так как мы не хотим, чтобы вообще везде использовалась эта среда выполнения.
> 4. Найдите настройку `code-runner.executorMap` и нажмите значок редактирования (`Edit in settings.json`).
> 5. В обьекте `"code-runner.executorMap"` нужно найти `python` и вписать вместо значения поумолчанию путь к `python`. Он будет примерно такой: `путь до проекта/venv/bin/python`.
